<iframe onload="this.height=this.contentWindow.document.body.scrollHeight + 40;" frameborder=0 height=500 width=100% srcdoc="&lt;style&gt;.background{font-family:monaco,Consolas,LucidaConsole,monospace;background-color:#1E1E1E;overflow:scroll;}.method{color:#DCDCAA;}.class{color:#4EC9B0;}.keyword{color:#569cd6;}.string{color:#ce9178;}.interface{color:#b8d7a3;}.numericLiteral{color:#b8d7a3;}.typeParam{color:#b8d7a3;}.control{color:#C586C0;}.comment{color:#6A9955;}.struct{color:#86C691;}.namespace{color:#dfdfdf;}.identifier{color:#dfdfdf;}.punctuation{color:#dfdfdf;}.operator{color:#dfdfdf;}.propertyName{color:#dfdfdf;}.fieldName{color:#dfdfdf;}.constant{color:#dfdfdf;}.localName{color:#9CDCFE;}.parameter{color:#9CDCFE;}.delegate{color:#4EC9B0;}.code_highlight{background-color:#395929;}table{white-space:pre;}.line_no::before{content:attr(line_no);color:white;}.code_column{padding-left:5px;color:#dfdfdf;}&lt;/style&gt;
&lt;pre class=&quot;background&quot;&gt;
&lt;table&gt;
&lt;tbody&gt;
&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;0&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;using&lt;/span&gt; System;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;1&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;using&lt;/span&gt; System.Collections.Concurrent;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;2&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;using&lt;/span&gt; System.Collections.Generic;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;3&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;using&lt;/span&gt; System.Runtime.InteropServices;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;4&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;using&lt;/span&gt; System.Threading;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;5&quot;&gt;&lt;/td&gt;&lt;td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;6&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;namespace&lt;/span&gt; AsyncWithFibers&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;7&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;{&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;8&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;class&lt;/span&gt; &lt;span class=&quot;class&quot;&gt;Program&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;9&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;    {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;10&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;static void&lt;/span&gt; &lt;span class=&quot;method&quot;&gt;Main&lt;/span&gt;(&lt;span class=&quot;keyword&quot;&gt;string&lt;/span&gt;[] &lt;span class=&quot;parameter&quot;&gt;args&lt;/span&gt;)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;11&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;        {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;12&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;            &lt;span class=&quot;class&quot;&gt;HKTMonadFiberAsync&lt;/span&gt;.&lt;span class=&quot;method&quot;&gt;Run&lt;/span&gt;();&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;13&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;        }&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;14&quot;&gt;&lt;/td&gt;&lt;td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;15&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;public static void&lt;/span&gt; &lt;span class=&quot;method&quot;&gt;WhereAmI&lt;/span&gt;(&lt;span class=&quot;keyword&quot;&gt;string&lt;/span&gt; &lt;span class=&quot;parameter&quot;&gt;what&lt;/span&gt;)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;16&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;        {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;17&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;            &lt;span class=&quot;class&quot;&gt;Console&lt;/span&gt;.&lt;span class=&quot;method&quot;&gt;WriteLine&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;$&amp;quot;Thread&lt;/span&gt; {&lt;span class=&quot;class&quot;&gt;Thread&lt;/span&gt;.CurrentThread.ManagedThreadId} &lt;span class=&quot;string&quot;&gt;Time&lt;/span&gt; {&lt;span class=&quot;struct&quot;&gt;DateTime&lt;/span&gt;.Now}&lt;span class=&quot;string&quot;&gt;:&lt;/span&gt; {&lt;span class=&quot;parameter&quot;&gt;what&lt;/span&gt;}&lt;span class=&quot;string&quot;&gt;&amp;quot;&lt;/span&gt;);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;18&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;        }&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;19&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;    }&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;20&quot;&gt;&lt;/td&gt;&lt;td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;21&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;public class&lt;/span&gt; &lt;span class=&quot;class&quot;&gt;FiberHelper&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;22&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;    {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;23&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;        [&lt;span class=&quot;class&quot;&gt;DllImport&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&amp;quot;kernel32.dll&amp;quot;&lt;/span&gt;)]&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;24&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;static extern&lt;/span&gt; &lt;span class=&quot;struct&quot;&gt;IntPtr&lt;/span&gt; &lt;span class=&quot;method&quot;&gt;ConvertThreadToFiber&lt;/span&gt;(&lt;span class=&quot;struct&quot;&gt;IntPtr&lt;/span&gt; &lt;span class=&quot;parameter&quot;&gt;lpParameter&lt;/span&gt;);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;25&quot;&gt;&lt;/td&gt;&lt;td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;26&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;        [&lt;span class=&quot;class&quot;&gt;DllImport&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&amp;quot;kernel32.dll&amp;quot;&lt;/span&gt;)]&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;27&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;static extern&lt;/span&gt; &lt;span class=&quot;struct&quot;&gt;IntPtr&lt;/span&gt; &lt;span class=&quot;method&quot;&gt;CreateFiber&lt;/span&gt;(&lt;span class=&quot;keyword&quot;&gt;uint&lt;/span&gt; &lt;span class=&quot;parameter&quot;&gt;dwStackSize&lt;/span&gt;, &lt;span class=&quot;struct&quot;&gt;IntPtr&lt;/span&gt; &lt;span class=&quot;parameter&quot;&gt;lpStartAddress&lt;/span&gt;, &lt;span class=&quot;struct&quot;&gt;IntPtr&lt;/span&gt; &lt;span class=&quot;parameter&quot;&gt;lpParameter&lt;/span&gt;);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;28&quot;&gt;&lt;/td&gt;&lt;td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;29&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;        [&lt;span class=&quot;class&quot;&gt;DllImport&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&amp;quot;kernel32.dll&amp;quot;&lt;/span&gt;)]&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;30&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;static extern&lt;/span&gt; &lt;span class=&quot;struct&quot;&gt;IntPtr&lt;/span&gt; &lt;span class=&quot;method&quot;&gt;SwitchToFiber&lt;/span&gt;(&lt;span class=&quot;struct&quot;&gt;IntPtr&lt;/span&gt; &lt;span class=&quot;parameter&quot;&gt;lpStartAddress&lt;/span&gt;);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;31&quot;&gt;&lt;/td&gt;&lt;td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;32&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;        [&lt;span class=&quot;class&quot;&gt;DllImport&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&amp;quot;kernel32.dll&amp;quot;&lt;/span&gt;)]&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;33&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;static extern&lt;/span&gt; &lt;span class=&quot;struct&quot;&gt;IntPtr&lt;/span&gt; &lt;span class=&quot;method&quot;&gt;DeleteFiber&lt;/span&gt;(&lt;span class=&quot;struct&quot;&gt;IntPtr&lt;/span&gt; &lt;span class=&quot;parameter&quot;&gt;lpStartAddress&lt;/span&gt;);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;34&quot;&gt;&lt;/td&gt;&lt;td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;35&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;        &lt;span class=&quot;class&quot;&gt;Dictionary&lt;/span&gt;&amp;lt;&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt;, &lt;span class=&quot;struct&quot;&gt;IntPtr&lt;/span&gt;&amp;gt; actions;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;36&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;struct&quot;&gt;IntPtr&lt;/span&gt; fiberCaller;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;37&quot;&gt;&lt;/td&gt;&lt;td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;38&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;class&quot;&gt;FiberHelper&lt;/span&gt;()&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;39&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;        {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;40&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;            actions = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;class&quot;&gt;Dictionary&lt;/span&gt;&amp;lt;&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt;, &lt;span class=&quot;struct&quot;&gt;IntPtr&lt;/span&gt;&amp;gt;();&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;41&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;        }&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;42&quot;&gt;&lt;/td&gt;&lt;td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;43&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;public void&lt;/span&gt; &lt;span class=&quot;method&quot;&gt;Convert&lt;/span&gt;()&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;44&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;        {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;45&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;            actions.&lt;span class=&quot;method&quot;&gt;Add&lt;/span&gt;(&lt;span class=&quot;numericLiteral&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;method&quot;&gt;ConvertThreadToFiber&lt;/span&gt;(&lt;span class=&quot;struct&quot;&gt;IntPtr&lt;/span&gt;.Zero));&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;46&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;        }&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;47&quot;&gt;&lt;/td&gt;&lt;td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;48&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;public void&lt;/span&gt; &lt;span class=&quot;method&quot;&gt;Create&lt;/span&gt;(&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;parameter&quot;&gt;action&lt;/span&gt;)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;49&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;        {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;50&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;            actions.&lt;span class=&quot;method&quot;&gt;Add&lt;/span&gt;(&lt;span class=&quot;parameter&quot;&gt;action&lt;/span&gt;, &lt;span class=&quot;method&quot;&gt;CreateFiber&lt;/span&gt;(&lt;span class=&quot;numericLiteral&quot;&gt;1024&lt;/span&gt; * &lt;span class=&quot;numericLiteral&quot;&gt;1024&lt;/span&gt;, fiberCaller, (&lt;span class=&quot;struct&quot;&gt;IntPtr&lt;/span&gt;)&lt;span class=&quot;parameter&quot;&gt;action&lt;/span&gt;));&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;51&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;        }&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;52&quot;&gt;&lt;/td&gt;&lt;td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;53&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;public void&lt;/span&gt; &lt;span class=&quot;method&quot;&gt;Switch&lt;/span&gt;(&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;parameter&quot;&gt;action&lt;/span&gt;)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;54&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;        {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;55&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;            &lt;span class=&quot;class&quot;&gt;Thread&lt;/span&gt;.&lt;span class=&quot;method&quot;&gt;Sleep&lt;/span&gt;(&lt;span class=&quot;numericLiteral&quot;&gt;100&lt;/span&gt;);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;56&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;            &lt;span class=&quot;struct&quot;&gt;IntPtr&lt;/span&gt; &lt;span class=&quot;localName&quot;&gt;param&lt;/span&gt; = actions[&lt;span class=&quot;parameter&quot;&gt;action&lt;/span&gt;];&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;57&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;            &lt;span class=&quot;method&quot;&gt;SwitchToFiber&lt;/span&gt;(&lt;span class=&quot;localName&quot;&gt;param&lt;/span&gt;);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;58&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;        }&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;59&quot;&gt;&lt;/td&gt;&lt;td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;60&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;public void&lt;/span&gt; &lt;span class=&quot;method&quot;&gt;Delete&lt;/span&gt;(&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;parameter&quot;&gt;action&lt;/span&gt;)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;61&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;        {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;62&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;            &lt;span class=&quot;method&quot;&gt;DeleteFiber&lt;/span&gt;(actions[&lt;span class=&quot;parameter&quot;&gt;action&lt;/span&gt;]);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;63&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;        }&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;64&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;    }&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;65&quot;&gt;&lt;/td&gt;&lt;td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;66&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;public class&lt;/span&gt; &lt;span class=&quot;class&quot;&gt;HKTMonadFiberAsync&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;67&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;    {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;68&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;public static&lt;/span&gt; &lt;span class=&quot;class&quot;&gt;ConcurrentDictionary&lt;/span&gt;&amp;lt;&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt;, &lt;span class=&quot;keyword&quot;&gt;byte&lt;/span&gt;&amp;gt; readyToGo = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;class&quot;&gt;ConcurrentDictionary&lt;/span&gt;&amp;lt;&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt;, &lt;span class=&quot;keyword&quot;&gt;byte&lt;/span&gt;&amp;gt;();&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;69&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;public static&lt;/span&gt; &lt;span class=&quot;class&quot;&gt;ConcurrentDictionary&lt;/span&gt;&amp;lt;&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt;, &lt;span class=&quot;delegate&quot;&gt;Action&lt;/span&gt;&amp;gt; allJobs = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;class&quot;&gt;ConcurrentDictionary&lt;/span&gt;&amp;lt;&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt;, &lt;span class=&quot;delegate&quot;&gt;Action&lt;/span&gt;&amp;gt;();&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;70&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;public static&lt;/span&gt; &lt;span class=&quot;class&quot;&gt;FiberHelper&lt;/span&gt; helper = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;class&quot;&gt;FiberHelper&lt;/span&gt;();&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;71&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;public static int&lt;/span&gt; current;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;72&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;public static bool&lt;/span&gt; done;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;73&quot;&gt;&lt;/td&gt;&lt;td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;74&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;public static int&lt;/span&gt; &lt;span class=&quot;method&quot;&gt;StartFiber&lt;/span&gt;(&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;parameter&quot;&gt;actionId&lt;/span&gt;)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;75&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;        {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;76&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;            allJobs[&lt;span class=&quot;parameter&quot;&gt;actionId&lt;/span&gt;]();&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;77&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;            &lt;span class=&quot;control&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;parameter&quot;&gt;actionId&lt;/span&gt; != &lt;span class=&quot;numericLiteral&quot;&gt;0&lt;/span&gt;)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;78&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;            {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;79&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;                &lt;span class=&quot;class&quot;&gt;HKTMonadFiberAsync&lt;/span&gt;.done = &lt;span class=&quot;keyword&quot;&gt;true&lt;/span&gt;;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;80&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;                &lt;span class=&quot;class&quot;&gt;HKTMonadFiberAsync&lt;/span&gt;.helper.&lt;span class=&quot;method&quot;&gt;Switch&lt;/span&gt;(&lt;span class=&quot;numericLiteral&quot;&gt;0&lt;/span&gt;);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;81&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;            }&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;82&quot;&gt;&lt;/td&gt;&lt;td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;83&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;            &lt;span class=&quot;control&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;numericLiteral&quot;&gt;0&lt;/span&gt;;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;84&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;        }&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;85&quot;&gt;&lt;/td&gt;&lt;td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;86&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;delegate int&lt;/span&gt; &lt;span class=&quot;delegate&quot;&gt;StartFiberDelegate&lt;/span&gt;(&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;parameter&quot;&gt;actionId&lt;/span&gt;);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;87&quot;&gt;&lt;/td&gt;&lt;td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;88&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;public static void&lt;/span&gt; &lt;span class=&quot;method&quot;&gt;Run&lt;/span&gt;()&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;89&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;        {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;90&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;            helper.fiberCaller = &lt;span class=&quot;class&quot;&gt;Marshal&lt;/span&gt;.&lt;span class=&quot;method&quot;&gt;GetFunctionPointerForDelegate&lt;/span&gt;((&lt;span class=&quot;delegate&quot;&gt;StartFiberDelegate&lt;/span&gt;)&lt;span class=&quot;method&quot;&gt;StartFiber&lt;/span&gt;);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;91&quot;&gt;&lt;/td&gt;&lt;td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;92&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;            helper.&lt;span class=&quot;method&quot;&gt;Convert&lt;/span&gt;();&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;93&quot;&gt;&lt;/td&gt;&lt;td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;94&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;            allJobs.&lt;span class=&quot;method&quot;&gt;TryAdd&lt;/span&gt;(&lt;span class=&quot;numericLiteral&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;method&quot;&gt;RunInternal&lt;/span&gt;);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;95&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;            readyToGo.&lt;span class=&quot;method&quot;&gt;TryAdd&lt;/span&gt;(&lt;span class=&quot;numericLiteral&quot;&gt;1&lt;/span&gt;, &lt;span class=&quot;numericLiteral&quot;&gt;0&lt;/span&gt;);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;96&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;            helper.&lt;span class=&quot;method&quot;&gt;Create&lt;/span&gt;(&lt;span class=&quot;numericLiteral&quot;&gt;1&lt;/span&gt;);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;97&quot;&gt;&lt;/td&gt;&lt;td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;98&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;            allJobs.&lt;span class=&quot;method&quot;&gt;TryAdd&lt;/span&gt;(&lt;span class=&quot;numericLiteral&quot;&gt;2&lt;/span&gt;, &lt;span class=&quot;method&quot;&gt;SideJob&lt;/span&gt;);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;99&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;            readyToGo.&lt;span class=&quot;method&quot;&gt;TryAdd&lt;/span&gt;(&lt;span class=&quot;numericLiteral&quot;&gt;2&lt;/span&gt;, &lt;span class=&quot;numericLiteral&quot;&gt;0&lt;/span&gt;);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;100&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;            helper.&lt;span class=&quot;method&quot;&gt;Create&lt;/span&gt;(&lt;span class=&quot;numericLiteral&quot;&gt;2&lt;/span&gt;);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;101&quot;&gt;&lt;/td&gt;&lt;td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;102&quot;&gt;&lt;/td&gt;&lt;td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;103&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;            &lt;span class=&quot;control&quot;&gt;while&lt;/span&gt; (&lt;span class=&quot;keyword&quot;&gt;true&lt;/span&gt;)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;104&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;            {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;105&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;                done = &lt;span class=&quot;keyword&quot;&gt;false&lt;/span&gt;;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;106&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;                &lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;localName&quot;&gt;keys&lt;/span&gt; = readyToGo.Keys.&lt;span class=&quot;method&quot;&gt;GetEnumerator&lt;/span&gt;();&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;107&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;                &lt;span class=&quot;control&quot;&gt;while&lt;/span&gt; (&lt;span class=&quot;localName&quot;&gt;keys&lt;/span&gt;.&lt;span class=&quot;method&quot;&gt;MoveNext&lt;/span&gt;())&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;108&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;                {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;109&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;                    current = &lt;span class=&quot;localName&quot;&gt;keys&lt;/span&gt;.Current;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;110&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;                    helper.&lt;span class=&quot;method&quot;&gt;Switch&lt;/span&gt;(current);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;111&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;                    &lt;span class=&quot;control&quot;&gt;if&lt;/span&gt; (done)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;112&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;                    {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;113&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;                        helper.&lt;span class=&quot;method&quot;&gt;Delete&lt;/span&gt;(current);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;114&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;                        &lt;span class=&quot;delegate&quot;&gt;Action&lt;/span&gt; &lt;span class=&quot;localName&quot;&gt;action&lt;/span&gt;;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;115&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;                        allJobs.&lt;span class=&quot;method&quot;&gt;TryRemove&lt;/span&gt;(current, &lt;span class=&quot;keyword&quot;&gt;out&lt;/span&gt; &lt;span class=&quot;localName&quot;&gt;action&lt;/span&gt;);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;116&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;                        &lt;span class=&quot;keyword&quot;&gt;byte&lt;/span&gt; &lt;span class=&quot;localName&quot;&gt;b&lt;/span&gt;;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;117&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;                        readyToGo.&lt;span class=&quot;method&quot;&gt;TryRemove&lt;/span&gt;(current, &lt;span class=&quot;keyword&quot;&gt;out&lt;/span&gt; &lt;span class=&quot;localName&quot;&gt;b&lt;/span&gt;);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;118&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;                    }&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;119&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;                }&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;120&quot;&gt;&lt;/td&gt;&lt;td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;121&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;                &lt;span class=&quot;control&quot;&gt;if&lt;/span&gt; (allJobs.IsEmpty)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;122&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;                {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;123&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;                    &lt;span class=&quot;control&quot;&gt;break&lt;/span&gt;;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;124&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;                }&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;125&quot;&gt;&lt;/td&gt;&lt;td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;126&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;                &lt;span class=&quot;class&quot;&gt;Thread&lt;/span&gt;.&lt;span class=&quot;method&quot;&gt;Sleep&lt;/span&gt;(&lt;span class=&quot;numericLiteral&quot;&gt;1&lt;/span&gt;);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;127&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;            }&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;128&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;        }&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;129&quot;&gt;&lt;/td&gt;&lt;td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;130&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;private static void&lt;/span&gt; &lt;span class=&quot;method&quot;&gt;RunInternal&lt;/span&gt;()&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;131&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;        {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;132&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;            &lt;span class=&quot;class&quot;&gt;Program&lt;/span&gt;.&lt;span class=&quot;method&quot;&gt;WhereAmI&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&amp;quot;\tBefore nesting&amp;quot;&lt;/span&gt;);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;133&quot;&gt;&lt;/td&gt;&lt;td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;134&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;            &lt;span class=&quot;method&quot;&gt;RunInternalNested&lt;/span&gt;&amp;lt;&lt;span class=&quot;class&quot;&gt;AsyncBuilder&lt;/span&gt;&amp;gt;();&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;135&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;            &lt;span class=&quot;comment&quot;&gt;//RunInternalNested&amp;lt;IdBuilder&amp;gt;();&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;136&quot;&gt;&lt;/td&gt;&lt;td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;137&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;            &lt;span class=&quot;class&quot;&gt;Program&lt;/span&gt;.&lt;span class=&quot;method&quot;&gt;WhereAmI&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&amp;quot;\tAfter nesting&amp;quot;&lt;/span&gt;);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;138&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;        }&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;139&quot;&gt;&lt;/td&gt;&lt;td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;140&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;private static void&lt;/span&gt; &lt;span class=&quot;method&quot;&gt;RunInternalNested&lt;/span&gt;&amp;lt;&lt;span class=&quot;typeParam&quot;&gt;T&lt;/span&gt;&amp;gt;() &lt;span class=&quot;keyword&quot;&gt;where&lt;/span&gt; &lt;span class=&quot;typeParam&quot;&gt;T&lt;/span&gt; : &lt;span class=&quot;class&quot;&gt;Builder&lt;/span&gt;, &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt;()&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;141&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;        {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;142&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;            &lt;span class=&quot;class&quot;&gt;Program&lt;/span&gt;.&lt;span class=&quot;method&quot;&gt;WhereAmI&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&amp;quot;\t\tBefore creating delay&amp;quot;&lt;/span&gt;);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;143&quot;&gt;&lt;/td&gt;&lt;td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;144&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;            &lt;span class=&quot;method&quot;&gt;Delay&lt;/span&gt;&amp;lt;&lt;span class=&quot;typeParam&quot;&gt;T&lt;/span&gt;&amp;gt;(&lt;span class=&quot;numericLiteral&quot;&gt;2000&lt;/span&gt;);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;145&quot;&gt;&lt;/td&gt;&lt;td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;146&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;            &lt;span class=&quot;class&quot;&gt;Program&lt;/span&gt;.&lt;span class=&quot;method&quot;&gt;WhereAmI&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&amp;quot;\t\tAfter sleeping&amp;quot;&lt;/span&gt;);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;147&quot;&gt;&lt;/td&gt;&lt;td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;148&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;localName&quot;&gt;data&lt;/span&gt; = &lt;span class=&quot;method&quot;&gt;Data&lt;/span&gt;&amp;lt;&lt;span class=&quot;typeParam&quot;&gt;T&lt;/span&gt;, &lt;span class=&quot;keyword&quot;&gt;string&lt;/span&gt;&amp;gt;(&lt;span class=&quot;string&quot;&gt;&amp;quot;Some string&amp;quot;&lt;/span&gt;);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;149&quot;&gt;&lt;/td&gt;&lt;td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;150&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;            &lt;span class=&quot;class&quot;&gt;Program&lt;/span&gt;.&lt;span class=&quot;method&quot;&gt;WhereAmI&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;$&amp;quot;\t\tAfter creating data&lt;/span&gt; {&lt;span class=&quot;localName&quot;&gt;data&lt;/span&gt;}&lt;span class=&quot;string&quot;&gt;&amp;quot;&lt;/span&gt;);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;151&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;        }&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;152&quot;&gt;&lt;/td&gt;&lt;td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;153&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;private static void&lt;/span&gt; &lt;span class=&quot;method&quot;&gt;Delay&lt;/span&gt;&amp;lt;&lt;span class=&quot;typeParam&quot;&gt;T&lt;/span&gt;&amp;gt;(&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;parameter&quot;&gt;timeout&lt;/span&gt;) &lt;span class=&quot;keyword&quot;&gt;where&lt;/span&gt; &lt;span class=&quot;typeParam&quot;&gt;T&lt;/span&gt; : &lt;span class=&quot;class&quot;&gt;Builder&lt;/span&gt;, &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt;()&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;154&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;        {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;155&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;localName&quot;&gt;context&lt;/span&gt; = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;typeParam&quot;&gt;T&lt;/span&gt;().&lt;span class=&quot;method&quot;&gt;Build&lt;/span&gt;&amp;lt;&lt;span class=&quot;keyword&quot;&gt;object&lt;/span&gt;&amp;gt;();&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;156&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;localName&quot;&gt;timer&lt;/span&gt; = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;class&quot;&gt;Timer&lt;/span&gt;(&lt;span class=&quot;parameter&quot;&gt;_&lt;/span&gt; =&amp;gt; &lt;span class=&quot;localName&quot;&gt;context&lt;/span&gt;.&lt;span class=&quot;method&quot;&gt;Complete&lt;/span&gt;(&lt;span class=&quot;keyword&quot;&gt;new object&lt;/span&gt;()), &lt;span class=&quot;keyword&quot;&gt;null&lt;/span&gt;, &lt;span class=&quot;parameter&quot;&gt;timeout&lt;/span&gt;, &lt;span class=&quot;class&quot;&gt;Timeout&lt;/span&gt;.Infinite);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;157&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;            &lt;span class=&quot;class&quot;&gt;GC&lt;/span&gt;.&lt;span class=&quot;method&quot;&gt;KeepAlive&lt;/span&gt;(&lt;span class=&quot;localName&quot;&gt;timer&lt;/span&gt;);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;158&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;            &lt;span class=&quot;localName&quot;&gt;context&lt;/span&gt;.&lt;span class=&quot;method&quot;&gt;Map&lt;/span&gt;((&lt;span class=&quot;keyword&quot;&gt;object&lt;/span&gt;)&lt;span class=&quot;keyword&quot;&gt;null&lt;/span&gt;, &lt;span class=&quot;parameter&quot;&gt;_&lt;/span&gt; =&amp;gt; &lt;span class=&quot;parameter&quot;&gt;timeout&lt;/span&gt;);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;159&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;        }&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;160&quot;&gt;&lt;/td&gt;&lt;td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;161&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;private static&lt;/span&gt; &lt;span class=&quot;typeParam&quot;&gt;U&lt;/span&gt; &lt;span class=&quot;method&quot;&gt;Data&lt;/span&gt;&amp;lt;&lt;span class=&quot;typeParam&quot;&gt;T&lt;/span&gt;, &lt;span class=&quot;typeParam&quot;&gt;U&lt;/span&gt;&amp;gt;(&lt;span class=&quot;typeParam&quot;&gt;U&lt;/span&gt; &lt;span class=&quot;parameter&quot;&gt;d&lt;/span&gt;) &lt;span class=&quot;keyword&quot;&gt;where&lt;/span&gt; &lt;span class=&quot;typeParam&quot;&gt;T&lt;/span&gt; : &lt;span class=&quot;class&quot;&gt;Builder&lt;/span&gt;, &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt;()&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;162&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;        {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;163&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;var&lt;/span&gt; &lt;span class=&quot;localName&quot;&gt;context&lt;/span&gt; = &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;typeParam&quot;&gt;T&lt;/span&gt;().&lt;span class=&quot;method&quot;&gt;Build&lt;/span&gt;&amp;lt;&lt;span class=&quot;typeParam&quot;&gt;U&lt;/span&gt;&amp;gt;();&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;164&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;            &lt;span class=&quot;control&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;localName&quot;&gt;context&lt;/span&gt;.&lt;span class=&quot;method&quot;&gt;Map&lt;/span&gt;(&lt;span class=&quot;parameter&quot;&gt;d&lt;/span&gt;, &lt;span class=&quot;parameter&quot;&gt;_&lt;/span&gt; =&amp;gt; &lt;span class=&quot;parameter&quot;&gt;d&lt;/span&gt;);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;165&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;        }&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;166&quot;&gt;&lt;/td&gt;&lt;td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;167&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;private static void&lt;/span&gt; &lt;span class=&quot;method&quot;&gt;SideJob&lt;/span&gt;()&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;168&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;        {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;169&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;            &lt;span class=&quot;class&quot;&gt;Program&lt;/span&gt;.&lt;span class=&quot;method&quot;&gt;WhereAmI&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;&amp;quot;\tSide job&amp;quot;&lt;/span&gt;);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;170&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;        }&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;171&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;    }&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;172&quot;&gt;&lt;/td&gt;&lt;td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;173&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;public abstract class&lt;/span&gt; &lt;span class=&quot;class&quot;&gt;Builder&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;174&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;    {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;175&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;public abstract&lt;/span&gt; &lt;span class=&quot;interface&quot;&gt;Monad&lt;/span&gt;&amp;lt;&lt;span class=&quot;typeParam&quot;&gt;T&lt;/span&gt;&amp;gt; &lt;span class=&quot;method&quot;&gt;Build&lt;/span&gt;&amp;lt;&lt;span class=&quot;typeParam&quot;&gt;T&lt;/span&gt;&amp;gt;();&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;176&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;    }&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;177&quot;&gt;&lt;/td&gt;&lt;td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;178&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;public class&lt;/span&gt; &lt;span class=&quot;class&quot;&gt;IdBuilder&lt;/span&gt; : &lt;span class=&quot;class&quot;&gt;Builder&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;179&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;    {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;180&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;public override&lt;/span&gt; &lt;span class=&quot;interface&quot;&gt;Monad&lt;/span&gt;&amp;lt;&lt;span class=&quot;typeParam&quot;&gt;T&lt;/span&gt;&amp;gt; &lt;span class=&quot;method&quot;&gt;Build&lt;/span&gt;&amp;lt;&lt;span class=&quot;typeParam&quot;&gt;T&lt;/span&gt;&amp;gt;()&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;181&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;        {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;182&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;            &lt;span class=&quot;control&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;class&quot;&gt;Id&lt;/span&gt;&amp;lt;&lt;span class=&quot;typeParam&quot;&gt;T&lt;/span&gt;&amp;gt;();&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;183&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;        }&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;184&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;    }&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;185&quot;&gt;&lt;/td&gt;&lt;td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;186&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;public class&lt;/span&gt; &lt;span class=&quot;class&quot;&gt;AsyncBuilder&lt;/span&gt; : &lt;span class=&quot;class&quot;&gt;Builder&lt;/span&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;187&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;    {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;188&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;public override&lt;/span&gt; &lt;span class=&quot;interface&quot;&gt;Monad&lt;/span&gt;&amp;lt;&lt;span class=&quot;typeParam&quot;&gt;T&lt;/span&gt;&amp;gt; &lt;span class=&quot;method&quot;&gt;Build&lt;/span&gt;&amp;lt;&lt;span class=&quot;typeParam&quot;&gt;T&lt;/span&gt;&amp;gt;()&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;189&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;        {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;190&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;            &lt;span class=&quot;control&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;class&quot;&gt;Async&lt;/span&gt;&amp;lt;&lt;span class=&quot;typeParam&quot;&gt;T&lt;/span&gt;&amp;gt;();&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;191&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;        }&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;192&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;    }&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;193&quot;&gt;&lt;/td&gt;&lt;td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;194&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;public interface&lt;/span&gt; &lt;span class=&quot;interface&quot;&gt;Monad&lt;/span&gt;&amp;lt;&lt;span class=&quot;typeParam&quot;&gt;T&lt;/span&gt;&amp;gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;195&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;    {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;196&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;        &lt;span class=&quot;typeParam&quot;&gt;U&lt;/span&gt; &lt;span class=&quot;method&quot;&gt;Map&lt;/span&gt;&amp;lt;&lt;span class=&quot;typeParam&quot;&gt;U&lt;/span&gt;&amp;gt;(&lt;span class=&quot;typeParam&quot;&gt;T&lt;/span&gt; &lt;span class=&quot;parameter&quot;&gt;value&lt;/span&gt;, &lt;span class=&quot;delegate&quot;&gt;Func&lt;/span&gt;&amp;lt;&lt;span class=&quot;typeParam&quot;&gt;T&lt;/span&gt;, &lt;span class=&quot;typeParam&quot;&gt;U&lt;/span&gt;&amp;gt; &lt;span class=&quot;parameter&quot;&gt;lambda&lt;/span&gt;);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;197&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; &lt;span class=&quot;method&quot;&gt;Complete&lt;/span&gt;(&lt;span class=&quot;typeParam&quot;&gt;T&lt;/span&gt; &lt;span class=&quot;parameter&quot;&gt;t&lt;/span&gt;);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;198&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;    }&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;199&quot;&gt;&lt;/td&gt;&lt;td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;200&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;public class&lt;/span&gt; &lt;span class=&quot;class&quot;&gt;Id&lt;/span&gt;&amp;lt;&lt;span class=&quot;typeParam&quot;&gt;T&lt;/span&gt;&amp;gt; : &lt;span class=&quot;interface&quot;&gt;Monad&lt;/span&gt;&amp;lt;&lt;span class=&quot;typeParam&quot;&gt;T&lt;/span&gt;&amp;gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;201&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;    {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;202&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;typeParam&quot;&gt;T&lt;/span&gt; t;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;203&quot;&gt;&lt;/td&gt;&lt;td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;204&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;typeParam&quot;&gt;U&lt;/span&gt; &lt;span class=&quot;method&quot;&gt;Map&lt;/span&gt;&amp;lt;&lt;span class=&quot;typeParam&quot;&gt;U&lt;/span&gt;&amp;gt;(&lt;span class=&quot;typeParam&quot;&gt;T&lt;/span&gt; &lt;span class=&quot;parameter&quot;&gt;value&lt;/span&gt;, &lt;span class=&quot;delegate&quot;&gt;Func&lt;/span&gt;&amp;lt;&lt;span class=&quot;typeParam&quot;&gt;T&lt;/span&gt;, &lt;span class=&quot;typeParam&quot;&gt;U&lt;/span&gt;&amp;gt; &lt;span class=&quot;parameter&quot;&gt;lambda&lt;/span&gt;)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;205&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;        {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;206&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.t = &lt;span class=&quot;parameter&quot;&gt;value&lt;/span&gt;;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;207&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;lock&lt;/span&gt; (&lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;208&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;            {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;209&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;                &lt;span class=&quot;control&quot;&gt;while&lt;/span&gt; (t == &lt;span class=&quot;keyword&quot;&gt;null&lt;/span&gt;)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;210&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;                {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;211&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;                    &lt;span class=&quot;class&quot;&gt;Monitor&lt;/span&gt;.&lt;span class=&quot;method&quot;&gt;Wait&lt;/span&gt;(&lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;212&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;                }&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;213&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;            }&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;214&quot;&gt;&lt;/td&gt;&lt;td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;215&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;            &lt;span class=&quot;control&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;parameter&quot;&gt;lambda&lt;/span&gt;(&lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.t);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;216&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;        }&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;217&quot;&gt;&lt;/td&gt;&lt;td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;218&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;public void&lt;/span&gt; &lt;span class=&quot;method&quot;&gt;Complete&lt;/span&gt;(&lt;span class=&quot;typeParam&quot;&gt;T&lt;/span&gt; &lt;span class=&quot;parameter&quot;&gt;t&lt;/span&gt;)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;219&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;        {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;220&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;lock&lt;/span&gt; (&lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;221&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;            {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;222&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;                &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.t = &lt;span class=&quot;parameter&quot;&gt;t&lt;/span&gt;;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;223&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;                &lt;span class=&quot;class&quot;&gt;Monitor&lt;/span&gt;.&lt;span class=&quot;method&quot;&gt;PulseAll&lt;/span&gt;(&lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;224&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;            }&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;225&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;        }&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;226&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;    }&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;227&quot;&gt;&lt;/td&gt;&lt;td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;228&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;public class&lt;/span&gt; &lt;span class=&quot;class&quot;&gt;Async&lt;/span&gt;&amp;lt;&lt;span class=&quot;typeParam&quot;&gt;T&lt;/span&gt;&amp;gt; : &lt;span class=&quot;interface&quot;&gt;Monad&lt;/span&gt;&amp;lt;&lt;span class=&quot;typeParam&quot;&gt;T&lt;/span&gt;&amp;gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;229&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;    {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;230&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;typeParam&quot;&gt;T&lt;/span&gt; t;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;231&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;private int&lt;/span&gt; current;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;232&quot;&gt;&lt;/td&gt;&lt;td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;233&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;typeParam&quot;&gt;U&lt;/span&gt; &lt;span class=&quot;method&quot;&gt;Map&lt;/span&gt;&amp;lt;&lt;span class=&quot;typeParam&quot;&gt;U&lt;/span&gt;&amp;gt;(&lt;span class=&quot;typeParam&quot;&gt;T&lt;/span&gt; &lt;span class=&quot;parameter&quot;&gt;value&lt;/span&gt;, &lt;span class=&quot;delegate&quot;&gt;Func&lt;/span&gt;&amp;lt;&lt;span class=&quot;typeParam&quot;&gt;T&lt;/span&gt;, &lt;span class=&quot;typeParam&quot;&gt;U&lt;/span&gt;&amp;gt; &lt;span class=&quot;parameter&quot;&gt;lambda&lt;/span&gt;)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;234&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;        {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;235&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.t = &lt;span class=&quot;parameter&quot;&gt;value&lt;/span&gt;;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;236&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;            &lt;span class=&quot;control&quot;&gt;if&lt;/span&gt; (t == &lt;span class=&quot;keyword&quot;&gt;null&lt;/span&gt;)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;237&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;            {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;238&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;                &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.current = &lt;span class=&quot;class&quot;&gt;HKTMonadFiberAsync&lt;/span&gt;.current;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;239&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;                &lt;span class=&quot;keyword&quot;&gt;byte&lt;/span&gt; &lt;span class=&quot;localName&quot;&gt;b&lt;/span&gt;;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;240&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;                &lt;span class=&quot;class&quot;&gt;HKTMonadFiberAsync&lt;/span&gt;.readyToGo.&lt;span class=&quot;method&quot;&gt;TryRemove&lt;/span&gt;(&lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.current, &lt;span class=&quot;keyword&quot;&gt;out&lt;/span&gt; &lt;span class=&quot;localName&quot;&gt;b&lt;/span&gt;);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;241&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;                &lt;span class=&quot;class&quot;&gt;HKTMonadFiberAsync&lt;/span&gt;.helper.&lt;span class=&quot;method&quot;&gt;Switch&lt;/span&gt;(&lt;span class=&quot;numericLiteral&quot;&gt;0&lt;/span&gt;);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;242&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;            }&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;243&quot;&gt;&lt;/td&gt;&lt;td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;244&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;            &lt;span class=&quot;control&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;parameter&quot;&gt;lambda&lt;/span&gt;(&lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.t);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;245&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;        }&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;246&quot;&gt;&lt;/td&gt;&lt;td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;247&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;public void&lt;/span&gt; &lt;span class=&quot;method&quot;&gt;Complete&lt;/span&gt;(&lt;span class=&quot;typeParam&quot;&gt;T&lt;/span&gt; &lt;span class=&quot;parameter&quot;&gt;t&lt;/span&gt;)&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;248&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;        {&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;249&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.t = &lt;span class=&quot;parameter&quot;&gt;t&lt;/span&gt;;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;250&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;            &lt;span class=&quot;class&quot;&gt;HKTMonadFiberAsync&lt;/span&gt;.readyToGo.&lt;span class=&quot;method&quot;&gt;TryAdd&lt;/span&gt;(&lt;span class=&quot;keyword&quot;&gt;this&lt;/span&gt;.current, &lt;span class=&quot;numericLiteral&quot;&gt;0&lt;/span&gt;);&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;251&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;        }&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;252&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;    }&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td class=&quot;line_no&quot; line_no=&quot;253&quot;&gt;&lt;/td&gt;&lt;td class=&quot;code_column&quot;&gt;}&lt;/td&gt;&lt;/tr&gt;&lt;/tbody&gt;
&lt;/table&gt;&lt;/pre&gt;
"></iframe>